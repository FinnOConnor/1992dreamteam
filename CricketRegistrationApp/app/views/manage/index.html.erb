<h1> Manage Teams</h1>

<head>
  <meta charset="utf-8">
  <title>jQuery UI Droppable - Shopping Cart Demo</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css">
  <style>
  h1 { padding: .2em; margin: 0; }
  #products { float:left; width: 500px; margin-right: 2em; }
  #cart { width: 200px; float: left; margin-top: 1em; }
  /* style the list to maximize the droppable hitarea */
  #cart ol { margin: 0; padding: 1em 0 1em 3em; }
  </style>
  <script>
  $(function() {
    $( "#catalog" ).accordion();
    $( "#catalog li" ).draggable({
      appendTo: "body",
      helper: "clone"
    });
    $( "#cart ol" ).droppable({
      activeClass: "ui-state-default",
      hoverClass: "ui-state-hover",
      accept: ":not(.ui-sortable-helper)",
      drop: function( event, ui ) {
        $( this ).find( ".placeholder" ).remove();
        $( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );
      }
    }).sortable({
      items: "li:not(.placeholder)",
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "ui-state-default" );
      }
    });
  });
  </script>
</head>
<body>
 
<div id="products">
  <h1 class="ui-widget-header">Team</h1>
  <div id="catalog">
    <% @teams.each do |team| %>
      <h2><a href="#"><%= team.name %></a></h2>
    <div>
      <ul>
        <% team.players.each do |player| %>
          <li><%= [player.first_name, player.surname].join(" ") %> </li>
        <% end %>
      </ul>
    </div>
    <% end %>
  </div>
</div>
 
<div id="cart">
  <h1 class="ui-widget-header">Players</h1>
  <div class="ui-widget-content">
    <ol>
      <li class="placeholder">Add your items here</li>
    </ol>
  </div>
</div>
 
 
</body>

<%= select_tag 'search_topic', 
  options_from_collection_for_select(Team.all, :id, :name) %>

<table class="inlineTable">
  <thead>
    <tr>
      <th>Player Number</th>
      <th>Player Name</th>
      <th></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @teams.each do |team| %>
      <tr>
        <td><%= params['search_topic'] %></td>
        <td><%= team.try(:grade).try(:grade_name) %></td>
        <td><%= team.try(:coach).try(:first_name) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<table class="inlineTable">
  <thead>
    <tr>
      <th><%= sort_link(@search, :first_name, "First name") %></th>
      <th><%= sort_link(@search, :surname, "Surname") %></th>
      <th><%= sort_link(@search, :gender , "Gender") %></th>
      <th><%= sort_link(@search, :date_of_birth , "Date of birth") %></th>
      <th><%= sort_link(@search, :school_year , "School year") %></th>
      <th><%= sort_link(@search, :school_next_year , "School next year") %></th>
      <th><%= sort_link(@search, :grade_last_season , "Grade last season") %></th>
      <th><%= sort_link(@search, :senior , "Senior") %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @players.each do |player| %>
      <tr>
        <td><%= link_to player.first_name, player %></td>
        <td><%= player.surname %></td>
        <td><%= player.gender %></td>
        <td><%= player.date_of_birth %></td>
        <td><%= player.school_year %></td>
        <td><%= player.school_next_year %></td>
        <td><%= player.grade_last_season %></td>
        <td><%= player.senior %></td>
      </tr>
    <% end %>
  </tbody>
</table>